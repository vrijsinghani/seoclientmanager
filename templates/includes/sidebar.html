{% load static %}

<aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 " id="sidenav-main">
  <div class="sidenav-header">
    <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
    <a class="navbar-brand m-0" href="/">
      <img src="{% static 'assets/neuralami/logos/NeuralamiLogo51x51.png' %}" class="navbar-brand-img h-100" alt="main_logo">
      <span class="ms-1 font-weight-bold">Neuralami Control Center</span>
    </a>
  </div>
  <hr class="horizontal dark mt-0">
  <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}" href="{% url 'seo_manager:dashboard' %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-tv-2 text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'summarize' %}active{% endif %}" href="{% url 'seo_manager:summarize_view' %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-scissors text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Summarize</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'client_list' %}active{% endif %}" href="{% url 'seo_manager:client_list' %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-briefcase-24 text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Clients</span>
        </a>
      </li>
      <!-- Agents section -->
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'crewai_home' %}active{% endif %}" href="{% url 'agents:crewai_home' %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-spaceship text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">CrewAI</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if 'agents:' in request.resolver_match.namespace %}active{% endif %}" href="#" data-bs-toggle="collapse" data-bs-target="#crewai-submenu" aria-expanded="false">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-spaceship text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">CrewAI Agents</span>
        </a>
        <div class="collapse {% if 'agents:' in request.resolver_match.namespace %}show{% endif %}" id="crewai-submenu">
          <ul class="nav ms-4 ps-3">
            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.url_name == 'crew_list' %}active{% endif %}" href="{% url 'agents:crew_list' %}">
                <span class="nav-link-text ms-1">Crews</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.url_name == 'manage_crews' %}active{% endif %}" href="{% url 'agents:manage_crews' %}">
                <span class="nav-link-text ms-1">Manage Crews</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.url_name == 'manage_agents' %}active{% endif %}" href="{% url 'agents:manage_agents' %}">
                <span class="nav-link-text ms-1">Manage Agents</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.url_name == 'manage_tasks' %}active{% endif %}" href="{% url 'agents:manage_tasks' %}">
                <span class="nav-link-text ms-1">Manage Tasks</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.resolver_match.url_name == 'manage_tools' %}active{% endif %}" href="{% url 'agents:manage_tools' %}">
                <span class="nav-link-text ms-1">Manage Tools</span>
              </a>
            </li>
          </ul>
        </div>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'activity_log' %}active{% endif %}" href="{% url 'seo_manager:activity_log' %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-calendar-grid-58 text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Activity Log</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'crawl_website' %}active{% endif %}" href="{% url 'crawl_website:index' %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-world-2 text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Crawl Website</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'file_manager' %}active{% endif %}" href="{% url 'file_manager' %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-folder-17 text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">File Manager</span>
        </a>
      </li>
      
      {% if client %}
      <li class="nav-item mt-3">
        <h6 class="ps-4 ms-2 text-uppercase text-xs font-weight-bolder opacity-6">Client: {{ client.name }}</h6>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'client_detail' %}active{% endif %}" href="{% url 'seo_manager:client_detail' client.id %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-single-02 text-dark text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Overview</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.resolver_match.url_name == 'client_analytics' %}active{% endif %}" href="{% url 'seo_manager:client_analytics' client.id %}">
          <div class="icon icon-shape icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-chart-bar-32 text-info text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Analytics</span>
        </a>
      </li>
      {% endif %} 
    </ul>
  </div>
  <div class="collapse navbar-collapse  w-auto h-auto" id="sidenav-collapse-main">
    {% include 'includes/menu-list.html' %}
  </div>
</aside>